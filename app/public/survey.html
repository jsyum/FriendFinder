<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <style>
      body {
        background-color: #fadadd;
      }
    </style>
    <link href="data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAADSx/8AAAAAAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAERERERERERERERESERERERERESAhERERERESAAIRERERESAAACERERESAAAAAhERESAAAAAAIRESAAAAAAACERIAAAAAAAIREgAAAAAAAhESAAACAAACEREgACEgACERERIiERIiERERERERERERERERERERERERERERERERERH//wAA/v8AAPx/AAD4PwAA8B8AAOAPAADABwAAgAMAAIADAACAAwAAgAMAAMEHAADjjwAA//8AAP//AAD//wAA" rel="icon" type="image/x-icon" />
    <title>Survey</title>
  </head>
  <body>
    <br /><br />
    <div class="container">
      <form action="">
        <h2>Personality quiz</h2>
        <hr />
        <h5>Name (Required)</h5>
        <input type="text" id="name" class="form-control" required />

        <h5>Link to photo image (Required)</h5>
        <input type="text" id="photo" class="form-control" required="" />
        <hr />
        <h5>
          Instructions: Rate how much you agree with the following statements
          using the dropdown menu.
        </h5>
        <br />
        <h6>1. Animals make me happy</h6>
        <select class="chosen-select" id="q1" required>
          <option value="">Select Option</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
        <br /><br />
        <h6>2. I love nature and the park</h6>
        <select class="chosen-select" id="q2" required>
          <option value="">Select Option</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
        <br /><br />
        <h6>3. I find it easy to talk about my emotions</h6>
        <select class="chosen-select" id="q3" required>
          <option value="">Select Option</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
        <br /><br />
        <h6>4. I like being spontaneous and going on adventures</h6>
        <select class="chosen-select" id="q4" required>
          <option value="">Select Option</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
        <br /><br />
        <h6>5. I am artistic</h6>
        <select class="chosen-select" id="q5" required>
          <option value="">Select Option</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
        <br /><br />
        <h6>6. I love to help people</h6>
        <select class="chosen-select" id="q6" required>
          <option value="">Select Option</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
        <br /><br />
        <h6>7. I am an introvert</h6>
        <select class="chosen-select" id="q7" required>
          <option value="">Select Option</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
        <br /><br />
        <h6>8. I trust feelings over reason</h6>
        <select class="chosen-select" id="q8" required>
          <option value="">Select Option</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
        <br /><br />
        <h6>9. I often contemplate the meaning of life</h6>
        <select class="chosen-select" id="q9" required>
          <option value="">Select Option</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
        <br /><br />
        <h6>10. I love to study and learn new things</h6>
        <select class="chosen-select" id="q10" required>
          <option value="">Select Option</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
        <hr />
        <button type="submit" class="btn btn-primary btn-lg" id="submit">
          Submit
        </button>
      </form>
    </div>
    
    <br />
    <!--Modal-->
    <div id="resultsModal" class="modal fade" role="dialog">
      <div class="modal-dialog">
          <div class="modal-content">
              <div class="modal-header">
                  <h1 class="modal-title" style="text-align: center">♡Your best match♡</h1>
              </div>
              <div class="modal-body">
                  <h2 id="matchName"></h2>
                  <img id="matchImage" style="max-width:400px;max-height:400px;" src=""
                      alt="">
              </div>
              <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              </div>
          </div>

      </div>
  </body>
</html>

<!-- BELOW CODE HANDLES HOW FORM DATA IS SENT TO OUR SERVER -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>
<script type="text/javascript">
  // In this code below we create the Front-end JavaScript which "POSTS" our form data to our express server.
  // In essence, when the user hits submit, jQuery grabs all of the fields then sends a post request to our api
  // Our api recognizes the route (/api/friends)... and then runs the associated code (found in apiRoutes.js).
  // In this case the associated code "saves" the data to the friends.js file

  $("#submit").on("click", function(event) {
    event.preventDefault();

    // Grab the form input by ID
    var userData = {
      name: $("#name").val(),
      photo: $("#photo").val(),
      scores: [
        $("#q1").val(),
        $("#q2").val(),
        $("#q3").val(),
        $("#q4").val(),
        $("#q5").val(),
        $("#q6").val(),
        $("#q7").val(),
        $("#q8").val(),
        $("#q9").val(),
        $("#q10").val()
      ]
    };

    console.log(userData);
// AJAX post to API
$.post("/api/friends", userData, function(data) {

// Grab result from AJAX post so match name and photo are displayed
$("#matchImage").attr("src", data.photo);
$("#matchName").text(data.name);

// Show modal with match result
$("#resultsModal").modal("show");

});
});
</script>
